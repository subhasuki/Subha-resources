<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Billing</title>
</head>
<body>
    <div class="container">

        <div class="in-form">

            <h1>Happy Mart</h1><br><br>
            
            <form  name="myForm" action="" id="clrfrm" method="POST"> 

               <label for="customerid">Customer-ID</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57"  
                    placeholder="Customer-ID" id="cid" name="customerid" ><br><br>
               
               <label for="cname">Customer-Name</label>
                    <input type="text" placeholder="Customer-Name" id="cname" name="cname" onKeyPress="return ValidateAlpha(event);"><br><br>
               
                <div class="bline"></div><br><br>

                      

                <label for="prctcode">Product-code</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57"  
                    placeholder="Product-Code" id="Productcode" name="prctcode" ><br><br> 
                    
                <label for="prctname">ProductName</label>&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="text" placeholder="Product-Name" id="productname" name="prctname" onKeyPress="return ValidateAlpha(event);"><br><br>     

                <label for="prctquantity">Quantity</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   <input type="text"  onkeypress="return event.charCode >= 48 && event.charCode <= 57" 
                   placeholder="Product-Quantity" id="productquantity" name="prctquantity" oninput="mulqun()" ><br><br> 

                <label for="unitprice">Per-Unit-Price</label>&nbsp;&nbsp;&nbsp;
                   <input type="text" onkeypress="return pointfun(event)" oninput="mulqun()"  
                   placeholder="Per-Unit-Price" id="unitprice" name="unitprice"><br><br> 
              
                <label for="amt">Amount</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                   <input type="text" placeholder="Amount" id="amt" name="amt" readonly><br><br><br><br>

               <input id="add" class="addstyle" onclick="addbtn()"  value="ADD" type="button">
               <p id="demo"></p>
            </form>
     </div>
        
        <div class="tbl-form">

            <table id="producttable">

                <tr>

                  <th>Productname</th>
                  <th>Quantity</th>
                  <th>Amount</th>
                  <th>Action</th>                  
                </tr>
                
              </table>
              <div class="footer">
                <input id="add_tot" onclick="totbtn()" class="addstyle" value="GST" type="button">
                <input type="text" id="tot_amount">
                <input type="hidden" id="over_amt">
              </div>
              

        </div>
    </div>


    <script>

        

        function pointfun(evt)
       {
          var charCode = (evt.which) ? evt.which : evt.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
       }

    // -------------   Amount Calculation  --------------------------

       function mulqun(){
           var qun = document.getElementById("productquantity").value;
        //    console.log(qun);
           var unitprc = document.getElementById("unitprice").value;
        //    console.log(unitprc);
           var total = qun * unitprc;
           var n = total.toFixed(2);
        //    console.log(total);
            document.getElementById("amt").value=n;

       }

       function mulunit(){
        mulqun();
       }


       function addbtn() {    
           
        var a = document.forms["myForm"]["customerid"].value;
        var b = document.forms["myForm"]["cname"].value;
        var c = document.forms["myForm"]["prctcode"].value;
        var d = document.forms["myForm"]["prctname"].value;
        var e = document.forms["myForm"]["prctquantity"].value;
        var f = document.forms["myForm"]["unitprice"].value;
    
        if (a == "") {
            alert("Customer-id must be filled out");
            return false;
        }
        else if(b == ""){
            alert("CustomerName must be filled out");
            return false;
        }
        else if(c == ""){
            alert("Productcode must be filled out");
            return false;
        }
        else if(d == ""){
            alert("Productname must be filled out");
            return false;
        }
        else if(e == ""){
            alert("Quantity must be filled out");
            return false;
        }
        else if(f == ""){
            alert("Per-Unit-Price must be filled out");
        }


            $("#producttable tbody").append("<tr>" +
                "<td>" + $("#productname").val() + "</td>" +
                "<td>" + $("#productquantity").val() + "</td>" +
                "<td class='totcount'>" + $("#amt").val() + "</td>" +
                "<td>" + "<button type='button' onclick='productDelete(this);'>" +
                "<i class='fa fa-trash' id='icon'></i>" +"</button>" + "</td>" +
                "</tr>");   
                
                // $('#clrfrm')[0].reset();
                document.getElementById("Productcode").value = '';
                document.getElementById("productname").value = '';
                document.getElementById("productquantity").value = '';
                document.getElementById("unitprice").value = '';
                document.getElementById("amt").value = '';

                // $('#Productcode').children('input').val('')
                // $('#productname').children('input').val('')
                // $('#prctquantity').children('input').val('')
                // $('#amt').children('input').val('')
                // $('#unitprice').children('input').val('')

               
        }

        function productDelete(ctl) {
            $(ctl).parents("tr").remove();
        }

        function totbtn()  {
               
                var tds = document.getElementById('producttable').getElementsByTagName('td');
                var sum = 0;
                for(var i = 0; i < tds.length; i ++) {
                if(tds[i].className == 'totcount') {
                sum += isNaN(tds[i].innerHTML) ? 0 : parseInt(tds[i].innerHTML);
                }
                }
                document.getElementById('over_amt').value=sum;
                document.getElementById('producttable').innerHTML += '<tr> <td></td> <td> total</td> <td> ' + sum + '</td><td></td></tr> ';
               

                var gsttot = document.getElementById('over_amt').value;
                var price = gsttot * 1;
                //display the result
                var tot_price =  price + (price * 0.12);   
                var rs = "RS." + tot_price;          
                var divobj = document.getElementById('tot_amount');
                divobj.value = rs;

}
            
        function ValidateAlpha(evt)
            {
                var keyCode = (evt.which) ? evt.which : evt.keyCode
                if ((keyCode < 65 || keyCode > 90) && (keyCode < 97 || keyCode > 123) && keyCode != 32)
                
                return false;
                    return true;
            }

    </script>
</body>
</html>